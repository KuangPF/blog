<!DOCTYPE html>

<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <link rel="shortcut icon" href="/blog/logo.png">
  <title>React Hooks è®²è§£ [ ğŸ¦„ KuangPFâ€™ blog ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/blog/css/iLiKE.css">
    
  
</head></html>
<body>
    <div class="header">
        <div class="container">
    <div class="menu">
      <div class="menu-left">
        <a href="/">
          <img src="/blog/unicorn.svg" class="no-medium-zoom-image"></img>
        </a>
      </div>
      <div class="menu-right">
        
          
          
          
          
          
          
          <a href="/blog">é¦–é¡µ</a>
        
          
          
          
          
          
          <a href="https://github.com/KuangPF">Github</a>
        
      </div>
    </div>
</div>
    </div>
    <div class="container">
        
<h1 class="post-title">React Hooks è®²è§£</h1>
<article class="post markdown-style">
  
  <div class="toc-label">ç›®å½•</div>
  
  <ol class="ilike-toc"><li class="ilike-toc-item ilike-toc-level-2"><a class="ilike-toc-link" href="#å‰è¨€"><span class="ilike-toc-text">å‰è¨€</span></a></li><li class="ilike-toc-item ilike-toc-level-2"><a class="ilike-toc-link" href="#Basic-Hooks"><span class="ilike-toc-text">Basic Hooks</span></a><ol class="ilike-toc-child"><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#useState"><span class="ilike-toc-text">useState</span></a></li><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#useEffect"><span class="ilike-toc-text">useEffect</span></a></li><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#useContext"><span class="ilike-toc-text">useContext</span></a></li></ol></li><li class="ilike-toc-item ilike-toc-level-2"><a class="ilike-toc-link" href="#Additional-Hooks"><span class="ilike-toc-text">Additional Hooks</span></a><ol class="ilike-toc-child"><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#useReducer"><span class="ilike-toc-text">useReducer</span></a></li><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#useCallback"><span class="ilike-toc-text">useCallback</span></a></li><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#useMemo"><span class="ilike-toc-text">useMemo</span></a></li><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#useRef"><span class="ilike-toc-text">useRef</span></a></li><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#useImperativeHandle"><span class="ilike-toc-text">useImperativeHandle</span></a></li><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#useLayoutEffect"><span class="ilike-toc-text">useLayoutEffect</span></a></li><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#useDebugValue"><span class="ilike-toc-text">useDebugValue</span></a></li></ol></li><li class="ilike-toc-item ilike-toc-level-2"><a class="ilike-toc-link" href="#æ€»ç»“"><span class="ilike-toc-text">æ€»ç»“</span></a></li></ol>
  <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯å¯¹ React Hooks åŸºæœ¬çš„è¯­æ³•è¿›è¡Œç®€å•ä»‹ç»ï¼Œä»¥åŠä¼šç”¨ä¸€äº›ç®€å•çš„ demo æ¥å±•ç¤º React Hooks çš„å¥‡å¦™ä¹‹å¤„ï¼Œéƒ¨åˆ†ä»£ç æ¥æº React ç¤¾åŒºï¼Œæ‰€æœ‰ä»£ç å‡å¯åœ¨ <a href="https://github.com/KuangPF/react-hooks-demo" target="_blank" rel="noopener">react-hooks-demo</a> è·å–ã€‚</p>
<h2 id="Basic-Hooks"><a href="#Basic-Hooks" class="headerlink" title="Basic Hooks"></a>Basic Hooks</h2><h3 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h3><p><code>useState</code> æ˜¯ä¸ºäº†è®© function component å…·æœ‰ class component <code>state</code> åŠŸèƒ½ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useStateDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button</span></span><br><span class="line"><span class="regexp">        onClick=&#123;() =&gt; &#123;</span></span><br><span class="line"><span class="regexp">          setCount(count + 1)</span></span><br><span class="line"><span class="regexp">        &#125;&#125;</span></span><br><span class="line"><span class="regexp">      &gt;</span></span><br><span class="line"><span class="regexp">        click</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p><code>useState</code> æ¥æ”¶ä¸€ä¸ªåˆå§‹åŒ– <code>state</code> å€¼çš„å‚æ•°ï¼Œè¿”å›å€¼ä¸ºå½“å‰ <code>state</code> ä»¥åŠæ›´æ–° <code>state</code> çš„å‡½æ•°ã€‚<a href="https://kuangpf.com/react-hooks-demo/#/basic/useState" target="_blank" rel="noopener">demo</a></p>
<h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><p><code>useEffect</code> çš„ä½œç”¨æ˜¯æ‰§è¡Œä¸€äº›å‰¯ä½œç”¨ä»£ç ï¼Œæ¯”å¦‚ api è¯·æ±‚ï¼ŒDOM å…ƒç´ ä¿®æ”¹ç­‰ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªåŒ…å«å‰¯ä½œç”¨ä»£ç çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼ç”¨äºæ¸…é™¤å‰¯ä½œç”¨ã€‚ <code>useEffect</code> æ˜¯ UI å·²ç»æ¸²æŸ“åˆ°å±å¹•ä¸Šä»¥åæ‰ä¼šæ‰§è¡Œï¼Œå› æ­¤å‰¯ä½œç”¨é‡Œé¢çš„ä»£ç æ˜¯ä¸ä¼šé˜»ç¢å±å¹•çš„æ¸²æŸ“ï¼Œä¸ç±»ç»„ä»¶ç›¸æ¯”ï¼Œä½¿ç”¨ <code>useEffect</code> å¤„ç†å‰¯ä½œç”¨åï¼Œå±å¹•ä¼šæ¸²æŸ“åœ°æ›´å¿«ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useEffectDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [width, setWidth] = useState(<span class="built_in">window</span>.innerWidth)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> handleResize = <span class="function"><span class="params">()</span> =&gt;</span> setWidth(<span class="built_in">window</span>.innerWidth)</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, handleResize)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.removeEventListener(<span class="string">'resize'</span>, handleResize)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &lt;p&gt;the innerWidth is &#123;width&#125;px&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä¾‹å­ç›‘å¬æµè§ˆå™¨çª—å£å¤§å°ï¼Œå½“æµè§ˆå™¨çª—å£å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°†æµè§ˆå™¨ <code>innerWidth</code> çš„å€¼æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ä½†è¿™ä¸ªä¾‹å­å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š<br>æ¯å½“æµè§ˆå™¨çª—å£å‘ç”Ÿæ”¹å˜ï¼Œä¼šè°ƒç”¨ <code>setWidth</code> ä»è€Œå¼•èµ· <code>render</code>ï¼Œæ¯æ¬¡ <code>render</code> åï¼Œ React éƒ½ä¼šæ¸…é™¤ä¸Šä¸€æ¬¡çš„ effectï¼Œå¹¶ä¸”è¿è¡Œæœ¬æ¬¡æ¸²æŸ“çš„ effectã€‚ç›¸å½“äºæ¯æ¬¡ <code>render</code> çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œä¸€é <code>useEffect</code> ä¸­å‰¯ä½œç”¨ä»£ç ã€‚æ˜¾ç„¶æˆ‘ä»¬ä¸å¸Œæœ›æœ‰è¿™æ ·æ— æ•ˆçš„å¼€é”€ï¼Œé‚£ä¹ˆæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ<br><code>useEffect</code> ç¬¬äºŒä¸ªå‚æ•°æ¥æ”¶ä¸€ä¸ªä¾èµ–æ•°ç»„ï¼Œåªæœ‰å½“ä¾èµ–æ•°ç»„ä¸­çš„ä¸€é¡¹æˆ–è€…å¤šé¡¹å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šé‡æ–°æ‰§è¡Œ <code>useEffect</code> ä¸­çš„å‰¯ä½œç”¨ä»£ç ã€‚é‚£ä¹ˆå¯ä»¥è¿™æ ·ä¿®æ”¹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> handleResize = <span class="function"><span class="params">()</span> =&gt;</span> setWidth(<span class="built_in">window</span>.innerWidth)</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, handleResize)</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.removeEventListener(<span class="string">'resize'</span>, handleResize)</span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure>
<p>å½“ä¼ å…¥ä¸€ä¸ª <code>[]</code> æ—¶ï¼Œè¡¨ç¤º <code>useEffect</code> åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œç±»ä¼¼äº <code>componentDidMount</code>ï¼Œä½†ä¸¤è€…å¹¶ä¸å®Œå…¨ç›¸ç­‰ã€‚<a href="https://kuangpf.com/react-hooks-demo/#/basic/useEffect" target="_blank" rel="noopener">demo</a></p>
<h3 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h3><p><code>useContext</code> æ˜¯ä¸ºäº†åœ¨ function ç»„ä»¶ä¸­ä½¿ç”¨ç±»ç»„ä»¶çš„ <a href="https://reactjs.org/docs/context.html" target="_blank" rel="noopener">context</a> APIï¼Œä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª contextï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> local = <span class="string">'ğŸ‡¨ğŸ‡³'</span></span><br><span class="line"><span class="keyword">const</span> ThemeContext = React.createContext(local)</span><br></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨ <code>useContext</code> hook ä½¿ç”¨ contextï¼š<a href="https://kuangpf.com/react-hooks-demo/#/basic/useContext" target="_blank" rel="noopener">demo</a></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UseContextDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> local = useContext(ThemeContext)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;local: &#123;local&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// render: ğŸ‡¨ğŸ‡³</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ class ç»„ä»¶ä¸­ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹ context çš„å€¼ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ <code>Provider</code> æä¾› value å€¼ï¼ŒåŒæ ·ï¼Œåœ¨ function ç»„ä»¶ä¸­ä¹Ÿå¯ä»¥ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ThemeContext = React.createContext(<span class="string">'ğŸ‡¨ğŸ‡³'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Context</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> local = useContext(ThemeContext)</span><br><span class="line">  <span class="keyword">return</span> &lt;p&gt;local: &#123;local&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function App() &#123;</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;ThemeContext.Provider value=&#123;'ğŸ‡ºğŸ‡¸'&#125;&gt;</span></span><br><span class="line"><span class="regexp">      &lt;Context /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/ThemeContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ render: ğŸ‡ºğŸ‡¸</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Additional-Hooks"><a href="#Additional-Hooks" class="headerlink" title="Additional Hooks"></a>Additional Hooks</h2><h3 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h3><p><code>useReducer</code> æ˜¯ <code>useState</code> çš„ä¸€ç§ä»£æ›¿æ–¹æ¡ˆï¼Œç”¨äº state ä¹‹é—´æœ‰ä¾èµ–å…³ç³»æˆ–è€…æ¯”è¾ƒå¤æ‚çš„åœºæ™¯ã€‚<code>useReducer</code> æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>reducerï¼š<code>(state, action) =&gt; newState</code></li>
<li>initialArgï¼š åˆå§‹åŒ–å‚æ•°</li>
<li>Initï¼š æƒ°æ€§åˆå§‹åŒ–,è¿”å›åˆå§‹åŒ–æ•°æ®</li>
</ul>
<p>è¿”å›å½“å‰ state ä»¥åŠé…å¥—çš„ dispatch æ–¹æ³•ã€‚é¦–å…ˆçœ‹ä¸‹ <code>useReducer</code> å¤„ç†ç®€å•çš„ stateï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UseReducerDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, dispatch] = useReducer(<span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state + <span class="number">1</span></span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;count: &#123;count&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button</span></span><br><span class="line"><span class="regexp">        onClick=&#123;() =&gt; &#123;</span></span><br><span class="line"><span class="regexp">          dispatch()</span></span><br><span class="line"><span class="regexp">        &#125;&#125;</span></span><br><span class="line"><span class="regexp">      &gt;</span></span><br><span class="line"><span class="regexp">        add</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¾‹å­å’Œä½¿ç”¨ <code>useState</code> ä¸€æ ·ï¼Œéƒ½è¾¾åˆ°äº†è®¡æ•°çš„æ•ˆæœã€‚ è¯¥ä¾‹å­ä¸­ï¼ŒuseReducer åˆå§‹åŒ–äº† <code>count</code> å€¼ä¸º 0ï¼Œä¼ å…¥çš„ reducer å¾ˆç®€å•ï¼Œå½“æ¥æ”¶åˆ°ä¸€ä¸ª dispatch æ—¶ï¼Œå°† <code>count</code> çš„å€¼å¢åŠ  1ã€‚<a href="https://kuangpf.com/react-hooks-demo/#/additional/useReducer" target="_blank" rel="noopener">demo</a></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ <code>useReducer</code> å¦‚ä½•å¤„ç† state æœ‰ç›¸äº’ä¾èµ–çš„åœºæ™¯ï¼Œè¿˜æ˜¯ä»ä¸€ä¸ª demo å¼€å§‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CountApp = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> [frozen, setFrozen] = useState(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> increase = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setCount(<span class="function"><span class="params">prevCount</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (frozen) &#123;</span><br><span class="line">        <span class="keyword">return</span> prevCount</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> prevCount + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    increase()</span><br><span class="line">    setFrozen(<span class="literal">true</span>)</span><br><span class="line">    increase()</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &lt;p&gt;count &#123;count&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å‰¯ä½œç”¨ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œ <code>increase</code> å…ˆå°† <code>count</code> çš„å€¼å¢åŠ  1ï¼Œç„¶åæ‰§è¡Œ <code>setFrozen</code> å°† <code>count</code> çš„å€¼ â€œå†»ä½â€ï¼Œå†æ‰§è¡Œ <code>increase</code> å°† <code>count</code> çš„å€¼å¢åŠ  1ï¼Œç”±äºåœ¨ <code>setCount</code> è¿›è¡Œäº†åˆ¤æ–­ï¼Œå¦‚æœ <code>frozen</code> ä¸º <code>true</code>ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™å¢åŠ  1ï¼ŒæŒ‰ç…§è¿™æ ·çš„æ€è·¯ï¼Œæœ€å count çš„å€¼åº”è¯¥ä¸º 1ï¼Œä½†æ˜¯äº‹å®ä¸Šå±å¹•è¾“å‡ºçš„æ˜¯ 2ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„ç»“æœï¼Ÿ<a href="https://kuangpf.com/react-hooks-demo/#/useReducer-useState/stateCount-v1" target="_blank" rel="noopener">demo</a></p>
<p>åŸå› åœ¨äº function ç»„ä»¶çš„æ›´æ–°æœºåˆ¶ï¼Œå½“å¼•å…¥ hooks ä»¥åï¼Œfunction ç»„ä»¶ä¹Ÿæ‹¥æœ‰äº† state çš„åŠŸèƒ½ï¼Œå½“æˆ‘ä»¬ <code>setState</code> æ—¶ï¼ŒUI ä¼šé‡æ–°æ¸²æŸ“ï¼Œä½†åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æˆ‘ä»¬æ³¨æ„æ˜¯ï¼š<br><strong>function ç»„ä»¶ä¸­ï¼Œstate ä»¥åŠ props éƒ½æ˜¯é™æ€å€¼ï¼Œä¸å­˜åœ¨å¼•ç”¨ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ç†è§£ä¸º state å’Œ props æ˜¯ä¸€ä¸ª capture valueï¼Œæ¯æ¬¡æ¸²æŸ“çš„ state å’Œ props éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚</strong></p>
<p>å…³äºè¿™ç‚¹ï¼Œå¯ä»¥æŸ¥çœ‹ <a href="https://overreacted.io/a-complete-guide-to-useeffect" target="_blank" rel="noopener">a-complete-guide-to-useeffect</a> äº†è§£æ›´å¤šã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äº <code>useEffect</code> ä¼ å…¥çš„ä¾èµ–ä¸º <code>[]</code>ï¼Œå³è¯¥å‰¯ä½œç”¨åªä¼šåœ¨ UI ç¬¬ä¸€æ¬¡æ¸²æŸ“ç»“æŸåæ‰§è¡Œä¸€æ¬¡ã€‚è€Œåœ¨è¿™æ¬¡ <code>render</code> ä¸­ï¼Œ<code>count</code> çš„å€¼ä¸º 0ï¼Œ <code>frozen</code> å€¼ä¸º <code>false</code>ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡æ‰§è¡Œ <code>increase</code> æ—¶ï¼Œ<code>frozen</code> å€¼ä¾ç„¶ä¸º <code>false</code>ï¼Œ <code>setCount</code> è¿”å›çš„ <code>prevCount</code> ä¸º 1 ï¼Œç„¶åå¢åŠ  1ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæœ€å <code>render</code> çš„ç»“æœä¸º 2ï¼Œè€Œä¸æ˜¯ 1ã€‚</p>
<p>å¯¹äº state æœ‰ç›¸äº’ä¾èµ–çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>useReducer</code> æ¥å¤„ç†</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> INCREASE = <span class="string">'INCREASE'</span></span><br><span class="line"><span class="keyword">const</span> SET_FROZEN = <span class="string">'SET_FROZEN'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  count: <span class="number">0</span>,</span><br><span class="line">  frozen: <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> CountApp = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> reducer = <span class="function">(<span class="params">state: <span class="built_in">any</span>, action: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> INCREASE:</span><br><span class="line">        <span class="keyword">if</span> (state.frozen) &#123;</span><br><span class="line">          <span class="keyword">return</span> state</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          ...state,</span><br><span class="line">          count: state.count + <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">case</span> SET_FROZEN:</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          ...state,</span><br><span class="line">          frozen: action.frozen</span><br><span class="line">        &#125;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> state</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> [state, dispath] = useReducer(reducer, initialState)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    dispath(&#123; <span class="keyword">type</span>: INCREASE &#125;)</span><br><span class="line">    dispath(&#123; <span class="keyword">type</span>: SET_FROZEN, frozen: <span class="literal">true</span> &#125;)</span><br><span class="line">    dispath(&#123; <span class="keyword">type</span>: INCREASE &#125;)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &lt;p&gt;current count: &#123;state.count&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>useReducer</code> åï¼Œå°† <code>count</code> å’Œ <code>frozen</code> å…³è”èµ·æ¥ï¼Œæ‰§è¡Œ <code>dispath({ type: SET_FROZEN, frozen: true })</code> ä¿®æ”¹äº† <code>frozen</code> å€¼ ï¼Œç´§æ¥ç€æ‰§è¡Œ <code>dispath({ type: INCREASE })</code> æ—¶ï¼Œæ­¤æ—¶è·å–åˆ°çš„ <code>frozen</code> å€¼ä¸º <code>true</code>ï¼Œå½“ç„¶æœ€å <code>render</code> ç»“æœå°±ä¸º 1 ã€‚<a href="https://kuangpf.com/react-hooks-demo/#/useReducer-useState/reducerCount-v1" target="_blank" rel="noopener">demo</a></p>
<p>å‰é¢è¯´äº† <code>useReducer</code> æ˜¯ <code>useState</code> çš„ä¸€ç§ä»£æ›¿æ–¹æ¡ˆï¼Œé‚£ä¹ˆå¦‚ä½•ä½¿ç”¨ <code>useState</code> å®ç°å‘¢ï¼Œæ€è·¯ä¸€æ ·ï¼Œåªè¦å°† count ä¸ frozen æ”¾åœ¨ä¸€ä¸ª state ä¸­å³å¯è§£å†³ï¼š<a href="https://kuangpf.com/react-hooks-demo/#/useReducer-useState/stateCount-v2" target="_blank" rel="noopener">demo</a></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CountApp = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, setState] = useState(&#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">    frozen: <span class="literal">false</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> increase = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setState(<span class="function"><span class="params">prevState</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (prevState.frozen) &#123;</span><br><span class="line">        <span class="keyword">return</span> prevState;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...prevState,</span><br><span class="line">        count: state.count + <span class="number">1</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> setFrozen = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setState(<span class="function"><span class="params">prevState</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...prevState,</span><br><span class="line">        frozen: <span class="literal">true</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    increase();</span><br><span class="line">    setFrozen();</span><br><span class="line">    increase();</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &lt;p&gt;current count: &#123;state.count&#125;&lt;<span class="regexp">/p&gt;;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ renderï¼š1</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br></pre></td></tr></table></figure>
<p><code>useReducer</code> å’Œ <code>useState</code> ç›¸æ¯”ï¼Œä¼˜åŠ¿åœ¨äºå¯ä»¥å°†ä½¿ç”¨ reducer å°†ä¸€äº›é€»è¾‘è¿›è¡ŒæŠ½ç¦»ï¼Œè¿›è¡Œé›†ä¸­åŒ–ç®¡ç†ã€‚</p>
<h3 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback"></a>useCallback</h3><p><code>useCallback</code> å¯ä»¥ç†è§£ä¸ºå°†å‡½æ•°è¿›è¡Œäº†ç¼“å­˜ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°å’Œä¸€ä¸ªä¾èµ–æ•°ç»„ï¼Œåªæœ‰å½“ä¾èµ–æ•°ç»„ä¸­çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¯¥å›è°ƒå‡½æ•°æ‰ä¼šæ›´æ–°ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UseCallbackDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleResize = useCallback(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`the current count is: <span class="subst">$&#123;count&#125;</span>`</span>)</span><br><span class="line">  &#125;, [count])</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, handleResize)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.removeEventListener(<span class="string">'resize'</span>, handleResize)</span><br><span class="line">  &#125;, [handleResize])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button</span><br><span class="line">        onClick=&#123;<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          setCount(count + <span class="number">1</span>)</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        click</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;current count: &#123;count&#125;&lt;/</span>p&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¯¥ä¾‹å­ä¸­ï¼Œå½“æ”¹å˜ <code>count</code> åï¼Œç„¶åæ”¹å˜æµè§ˆå™¨çª—å£å¤§å°ï¼Œå¯ä»¥è·å–åˆ°æœ€æ–°çš„ <code>count</code> ã€‚å¦‚æœä¼ å…¥çš„ä¾èµ–ä¸º <code>[]</code>ï¼ŒhandleResize ä¸ä¼šæ›´æ–°ï¼Œåˆ™æ”¹å˜æµè§ˆå™¨çª—å£æ—¶ï¼Œ <code>count</code> çš„å€¼å§‹ç»ˆä¸º 0 ã€‚<a href="https://kuangpf.com/react-hooks-demo/#/additional/useCallback" target="_blank" rel="noopener">demo</a></p>
<h3 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo"></a>useMemo</h3><p><code>useMemo</code> å¯¹å€¼è¿›è¡Œäº†ç¼“å­˜ï¼Œä¸ <code>useCallback</code> ç±»ä¼¼ï¼Œæ¥æ”¶ä¸€ä¸ªåˆ›å»ºå€¼çš„å‡½æ•°å’Œä¸€ä¸ªä¾èµ–æ•°ç»„ï¼Œå®ƒä»…ä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®— memoized å€¼ï¼Œè¿™ç§ä¼˜åŒ–æœ‰åŠ©äºé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œé«˜å¼€é”€çš„è®¡ç®—ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UseMemoDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = useState(<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> useMemoChild = useMemo(<span class="function"><span class="params">()</span> =&gt;</span> &lt;Child count=&#123;count&#125; /&gt;, [count])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;&#123;count&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button</span></span><br><span class="line"><span class="regexp">        onClick=&#123;() =&gt; &#123;</span></span><br><span class="line"><span class="regexp">          setCount(count + 1)</span></span><br><span class="line"><span class="regexp">        &#125;&#125;</span></span><br><span class="line"><span class="regexp">      &gt;</span></span><br><span class="line"><span class="regexp">        click</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">      &lt;br /&gt;</span><br><span class="line">      &lt;input value=&#123;value&#125; onChange=&#123;<span class="function"><span class="params">e</span> =&gt;</span> setValue(e.target.value)&#125; /&gt;</span><br><span class="line">      &#123;useMemoChild&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function Child(&#123; count &#125;: &#123; count: number &#125;) &#123;</span></span><br><span class="line"><span class="regexp">  console.log('child render')</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;Fragment&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;useMemo hooks&lt;/</span>p&gt;</span><br><span class="line">      &lt;p&gt;child count: &#123;count&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Fragment&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥ä¾‹å­ä¸­ï¼ŒUseMemoDemo ç»„ä»¶å¼•ç”¨äº† Child ç»„ä»¶ï¼Œåœ¨ UseMemoDemo ç»„ä»¶ä¸­ï¼Œå®šä¹‰äº† <code>count</code> å’Œ <code>value</code> ä¸¤ä¸ª stateï¼Œå¦‚æœä¸ä½¿ç”¨ <code>useMemo</code>ï¼Œé‚£ä¹ˆæ¯å½“ UseMemoDemo ä¸­ input å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒChild ç»„ä»¶å°±ä¼šé‡æ–°æ¸²æŸ“ã€‚ä½† Child ç»„ä»¶ UI åªå’Œ <code>count</code> æœ‰å…³ï¼Œé‚£ä¹ˆè¿™æ ·å°±ä¼šé€ æˆ Child ç»„ä»¶æ— æ•ˆæ›´æ–°ï¼Œå› æ­¤å°±å¼•å…¥äº† <code>useMemo</code>ï¼Œå°† <code>count</code> ä½œä¸ºä¾èµ–ä¼ å…¥ï¼Œè¿™æ ·åªæœ‰å½“ <code>count</code> å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œ Child ç»„ä»¶æ‰ä¼šé‡æ–°æ¸²æŸ“ã€‚<a href="https://kuangpf.com/react-hooks-demo/#/additional/useMemo" target="_blank" rel="noopener">demo</a></p>
<h3 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h3><p><code>useRef</code> è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ <code>.current</code> å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•° <code>ï¼ˆinitialValueï¼‰</code>ã€‚è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚åœ¨ function ç»„ä»¶ä¸­ï¼Œ ä½¿ç”¨ <code>useRef</code> ä¸»è¦å¯ä»¥å®Œæˆä»¥ä¸‹ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>è·å– dom ç»“æ„</li>
<li>ä¿å­˜å˜é‡</li>
</ul>
<p>å…ˆçœ‹ä¸€ä¸ªè·å– dom èŠ‚ç‚¹, ç‚¹å‡» button æ—¶ï¼Œinput èšç„¦ã€‚<a href="https://kuangpf.com/react-hooks-demo/#/additional/useRef" target="_blank" rel="noopener">demo</a></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UseRefDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = useRef(<span class="literal">null</span> <span class="keyword">as</span> <span class="built_in">any</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleFocusInput = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    inputRef.current.focus()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input ref=&#123;inputRef&#125; /&gt;</span><br><span class="line">      &lt;button onClick=&#123;handleFocusInput&#125;&gt;click focus&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åçœ‹ä¸€ä¸ª react hook å®˜æ–¹çš„ä¸€ä¸ª <a href="https://codesandbox.io/s/lyx20m1ol?file=/src/index.js" target="_blank" rel="noopener">demo</a></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>)</span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;Click me&lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬ 3s ç‚¹å¤šæ¬¡ç‚¹å‡» buttonï¼Œé‚£ä¹ˆæ§åˆ¶å°è¾“å‡ºçš„ç»“æœä¼šæ˜¯ 0,1,2,3â€¦ï¼Œ è¿™æ˜¯ç”±äºæ¯æ¬¡æ¸²æŸ“æ—¶ <code>count</code> çš„å€¼éƒ½æ˜¯å›ºå®šçš„ã€‚ä½†ç±»ä¼¼çš„é€»è¾‘åœ¨ class ç»„ä»¶ä¸­è¡¨ç°ä¸ä¸€æ ·ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">componentDidUpdate() &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`You clicked <span class="subst">$&#123;this.state.count&#125;</span> times`</span>);</span><br><span class="line">  &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ class ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬åœ¨ 3s å†…å¤šæ¬¡ç‚¹å‡» buttonï¼Œæœ€ååœ¨æ§åˆ¶å°è¾“å‡ºçš„ç»“æœæ˜¯æœ€åä¸€æ¬¡ <code>count</code> æ›´æ–°çš„å€¼ï¼Œé‚£ä¹ˆå¦‚æœä½¿ç”¨ <code>useRef</code> æ¥å®ç°è¿™ç§æ•ˆæœï¼Ÿ<br>å‰é¢è¯´è¿‡ <code>useRef</code> è¿”å›çš„å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ï¼Œå®ƒä¸è‡ªå»ºä¸€ä¸ª <code>{current: ...}</code> å¯¹è±¡çš„å”¯ä¸€åŒºåˆ«æ˜¯ï¼Œ<code>useRef</code> ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿”å›åŒä¸€ä¸ª ref å¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™æ ·å¤„ç†ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useRefDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> countRef = useRef(count)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    countRef.current = count</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`You clicked <span class="subst">$&#123;countRef.current&#125;</span> times`</span>)</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125;, [count])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;count: &#123;count&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button</span></span><br><span class="line"><span class="regexp">        onClick=&#123;() =&gt; &#123;</span></span><br><span class="line"><span class="regexp">          setCount(count + 1)</span></span><br><span class="line"><span class="regexp">        &#125;&#125;</span></span><br><span class="line"><span class="regexp">      &gt;</span></span><br><span class="line"><span class="regexp">        click</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>æ¯æ¬¡æ¸²æŸ“æ—¶ï¼Œå°† <code>count</code> çš„å€¼èµ‹å€¼ç»™ <code>countRef.current</code>ï¼Œç”±äº useRef å§‹ç»ˆè¿”å›çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤ <code>countRef.current</code> å§‹ç»ˆæ˜¯æœ€æ–°çš„ <code>count</code> å€¼ï¼Œè¿™ç§ç‰¹æ€§æœ‰ç‚¹ç±»ä¼¼äº class ç»„ä»¶ä¸­çš„å®ä¾‹å­—æ®µã€‚</p>
<h3 id="useImperativeHandle"><a href="#useImperativeHandle" class="headerlink" title="useImperativeHandle"></a>useImperativeHandle</h3><p><code>useImperativeHandle</code> å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ ref æ—¶ï¼Œè‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç ã€‚<code>useImperativeHandle</code> åº”å½“ä¸ <code>forwardRef</code> ä¸€èµ·ä½¿ç”¨ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyInput</span>(<span class="params">props, ref</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = useRef(<span class="literal">null</span> <span class="keyword">as</span> <span class="built_in">any</span>)</span><br><span class="line">  useImperativeHandle(ref, <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">    focus: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      inputRef.current.focus()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;))</span><br><span class="line">  <span class="keyword">return</span> &lt;input ref=&#123;inputRef&#125; /&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FancyInputRef = forwardRef(FancyInput)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useImperativeHandleDemo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = useRef(<span class="literal">null</span> <span class="keyword">as</span> <span class="built_in">any</span>)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    inputRef.current.focus()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &lt;FancyInputRef ref=&#123;inputRef&#125; /&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ useImperativeHandleDemo ä¸­ï¼Œè°ƒç”¨ <code>inputRef.current.focus()</code> è®© input èšç„¦ã€‚<a href="https://kuangpf.com/react-hooks-demo/#/additional/useImperativeHandle" target="_blank" rel="noopener">demo</a></p>
<h3 id="useLayoutEffect"><a href="#useLayoutEffect" class="headerlink" title="useLayoutEffect"></a>useLayoutEffect</h3><p>å…¶<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Signature/Function" target="_blank" rel="noopener">å‡½æ•°ç­¾å</a> ä¸ <code>useEffect</code> ç›¸åŒï¼Œä½†å®ƒä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ effectã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– DOM å¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ¸²æŸ“ã€‚åœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰ï¼Œ<code>useLayoutEffect</code> å†…éƒ¨çš„æ›´æ–°è®¡åˆ’å°†è¢«åŒæ­¥åˆ·æ–°ã€‚<br>çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BlinkyRender = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (value === <span class="number">0</span>) &#123;</span><br><span class="line">      setValue(<span class="number">10</span> + <span class="built_in">Math</span>.random() * <span class="number">200</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [value]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div onClick=&#123;<span class="function"><span class="params">()</span> =&gt;</span> setValue(<span class="number">0</span>)&#125;&gt;value: &#123;value&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br></pre></td></tr></table></figure></p>
<p>å½“æˆ‘ä»¬å¿«é€Ÿç‚¹å‡»æ—¶ï¼Œ<code>value</code> ä¼šå‘ç”Ÿéšæœºå˜åŒ–ï¼Œä½† useEffect æ˜¯ UI å·²ç»æ¸²æŸ“åˆ°å±å¹•ä¸Šä»¥åæ‰ä¼šæ‰§è¡Œï¼Œ<code>value</code> ä¼šå…ˆæ¸²æŸ“ä¸º 0ï¼Œç„¶ååœ¨æ¸²æŸ“æˆéšæœºæ•°ï¼Œå› æ­¤å±å¹•ä¼šå‡ºç°é—ªçƒã€‚<a href="https://kuangpf.com/react-hooks-demo/#/additional/useLayoutEffect" target="_blank" rel="noopener">demo</a><br><img src="https://user-images.githubusercontent.com/20694238/80691645-20392480-8b03-11ea-8a46-39de9ee5529c.gif" alt="useEffect"></p>
<p>åœ¨ <code>useLayoutEffect</code> ä¸­ä¿®æ”¹ <code>value</code> çš„å€¼ï¼š<br> <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">useLayoutEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (value === <span class="number">0</span>) &#123;</span><br><span class="line">    setValue(<span class="number">10</span> + <span class="built_in">Math</span>.random() * <span class="number">200</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [value]);</span><br></pre></td></tr></table></figure></p>
<p>ç›¸æ¯”ä½¿ç”¨ <code>useEffect</code>,å½“ç‚¹å‡» divï¼Œ<code>value</code> æ›´æ–°ä¸º 0ï¼Œæ­¤æ—¶é¡µé¢å¹¶ä¸ä¼šæ¸²æŸ“ï¼Œè€Œæ˜¯ç­‰å¾… <code>useLayoutEffect</code> å†…éƒ¨çŠ¶æ€ä¿®æ”¹åï¼Œæ‰ä¼šå»æ›´æ–°é¡µé¢ï¼Œæ‰€ä»¥é¡µé¢ä¸ä¼šé—ªçƒã€‚<a href="https://kuangpf.com/react-hooks-demo/#/additional/useLayoutEffect" target="_blank" rel="noopener">demo</a><br><img src="https://user-images.githubusercontent.com/20694238/80691814-58d8fe00-8b03-11ea-962f-7d4a5f417eb8.gif" alt="useLayoutEffect"></p>
<h3 id="useDebugValue"><a href="#useDebugValue" class="headerlink" title="useDebugValue"></a>useDebugValue</h3><p><code>useDebugValue</code> å¯ç”¨äºåœ¨ React å¼€å‘è€…å·¥å…·ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰ hook çš„æ ‡ç­¾,</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useFriendStatus</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [isOnline] = useState(<span class="literal">null</span>)</span><br><span class="line">  useDebugValue(isOnline ? <span class="string">'Online'</span> : <span class="string">'Offline'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> isOnline</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> isOnline = useFriendStatus()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &lt;div&gt;&#123;isOnline&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ React å¼€å‘è€…å·¥å…·ä¸­ä¼šæ˜¾ç¤º â€œFriendStatus: Offlineâ€<br><img src="https://user-images.githubusercontent.com/20694238/80696639-3f878000-8b0a-11ea-8e2f-a55fb7c66044.png" alt="useDebugValue"><br>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ ¼å¼åŒ–å€¼çš„æ˜¾ç¤ºå¯èƒ½æ˜¯ä¸€é¡¹å¼€é”€å¾ˆå¤§çš„æ“ä½œï¼Œå› æ­¤ï¼Œ<code>useDebugValue</code> æ¥å—ä¸€ä¸ªæ ¼å¼åŒ–å‡½æ•°ä½œä¸ºå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚è¯¥å‡½æ•°åªæœ‰åœ¨ Hook è¢«æ£€æŸ¥ï¼ˆæ‰“å¼€ React å¼€å‘è€…å·¥å…·ï¼‰æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚å®ƒæ¥å— debug å€¼ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”ä¼šè¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ˜¾ç¤ºå€¼ã€‚<br>ä¾‹å¦‚ï¼Œ ä¸€ä¸ªè¿”å› <code>Date</code> å€¼çš„è‡ªå®šä¹‰ Hook å¯ä»¥é€šè¿‡æ ¼å¼åŒ–å‡½æ•°æ¥é¿å…ä¸å¿…è¦çš„ <code>toDateString</code> å‡½æ•°è°ƒç”¨:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useDebugValue(date, <span class="function"><span class="params">date</span> =&gt;</span> date.toDateString());</span><br></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ç¯‡æ–‡ç« å°† React Hooks è¯­æ³•è¿›è¡Œäº†ç®€å•ä»‹ç»ï¼ŒHooks åŠŸèƒ½ååˆ†å¼ºå¤§ï¼Œå¦‚æœçœ‹å®Œæ–‡ç« è¿˜ä¸æ˜¯å¾ˆç†è§£çš„è¯ï¼Œå»ºè®®æŠŠè¿™äº› demo è‡ªå·±å†æ‰‹åŠ¨å®ç°ä¸€éï¼Œè¿™æ ·æ”¶è·ä¼šæ›´å¤šã€‚å¦‚æœæ–‡ç« å†…å®¹æœ‰å“ªäº›æè¿°é”™è¯¯æˆ–è€…ä¸æ¸…çš„åœ°æ–¹ï¼Œæ¬¢è¿å„ä½çº æ­£å¹¶ä¸€èµ·äº¤æµã€‚ğŸ‘ğŸ‘</p>

</article>
<a href="https://github.com/KuangPF/blog/issues/16" class="issues-link" target="_blank">
  é—®é¢˜è®¨è®ºåŒº
</a>

<div class="pagenator post-pagenator">
  
  <a class="extend prev post-prev" href="/blog/2020/05/04/why-react-hooks/">ä¸Šä¸€ç¯‡</a>
  

  <p>ä¸Šæ¬¡æ›´æ–° 2020-05-04</p>

  
  <a class="extend next post-next" href="/blog/2019/10/12/typescript-is-keyword/">ä¸‹ä¸€ç¯‡</a>
  
</div>


    </div>
    <script src="https://unpkg.com/medium-zoom@1.0.4/dist/medium-zoom.min.js"></script>
    <script>
        let mediumZoomList = [...document.getElementsByTagName('img')].reduce((zoomList,currentItem)=> {
            return (currentItem.getAttribute('class') || []).indexOf('no-medium-zoom-image') >-1 ? zoomList : [...zoomList, currentItem]
        },[])
        mediumZoom(mediumZoomList)
    </script>
</body>
</html>
