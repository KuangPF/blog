<!DOCTYPE html>

<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <link rel="shortcut icon" href="/blog/logo.png">
  <title>Why React Hooks [ ğŸ¦„ KuangPFâ€™ blog ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/blog/css/iLiKE.css">
    
  
</head></html>
<body>
    <div class="header">
        <div class="container">
    <div class="menu">
      <div class="menu-left">
        <a href="/">
          <img src="/blog/unicorn.svg" class="no-medium-zoom-image"></img>
        </a>
      </div>
      <div class="menu-right">
        
          
          
          
          
          
          
          <a href="/blog">é¦–é¡µ</a>
        
          
          
          
          
          
          <a href="https://github.com/KuangPF">Github</a>
        
      </div>
    </div>
</div>
    </div>
    <div class="container">
        
<h1 class="post-title">Why React Hooks</h1>
<article class="post markdown-style">
  
  <div class="toc-label">ç›®å½•</div>
  
  <ol class="ilike-toc"><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#åœºæ™¯"><span class="ilike-toc-text">åœºæ™¯</span></a><ol class="ilike-toc-child"><li class="ilike-toc-item ilike-toc-level-4"><a class="ilike-toc-link" href="#API-è¯·æ±‚"><span class="ilike-toc-text">API è¯·æ±‚</span></a></li><li class="ilike-toc-item ilike-toc-level-4"><a class="ilike-toc-link" href="#input-è¾“å…¥"><span class="ilike-toc-text">input è¾“å…¥</span></a></li></ol></li><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#why-hooks"><span class="ilike-toc-text">why hooks</span></a></li><li class="ilike-toc-item ilike-toc-level-3"><a class="ilike-toc-link" href="#ä½¿ç”¨-React-Hooks-å®ç°"><span class="ilike-toc-text">ä½¿ç”¨ React Hooks å®ç°</span></a><ol class="ilike-toc-child"><li class="ilike-toc-item ilike-toc-level-4"><a class="ilike-toc-link" href="#usePropfile"><span class="ilike-toc-text">usePropfile</span></a></li><li class="ilike-toc-item ilike-toc-level-4"><a class="ilike-toc-link" href="#useInput"><span class="ilike-toc-text">useInput</span></a></li></ol></li></ol>
  <p>React Hooks æ˜¯ React 16.8 ç‰ˆæœ¬çš„æ–°å¢ç‰¹æ€§ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¼šæœ‰ Hooks äº§ç”Ÿï¼Ÿä»»ä½•ä¸€é¡¹æ–°çš„æŠ€æœ¯æ€»æ˜¯ä¸ºäº†è§£å†³å½“å‰å¼€å‘ä¸­çš„æŸä¸€äº›ç—›ç‚¹ï¼Œè€Œä¸æ˜¯æ— æ•…åœ°é‡å¤é€ è½®å­ï¼Œä¸‹é¢æˆ‘ä»¬ä»ä¸¤ä¸ªåœºæ™¯æ¥è¿›è¡Œä¸€å®šçš„è®²è§£ï¼Œæœ¬æ–‡ä¸­æ‰€æœ‰ä»£ç å‡å¯åœ¨ <a href="https://github.com/KuangPF/react-hooks-demo" target="_blank" rel="noopener">react-hooks-demo</a> æŸ¥çœ‹ã€‚</p>
<h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h3><h4 id="API-è¯·æ±‚"><a href="#API-è¯·æ±‚" class="headerlink" title="API è¯·æ±‚"></a>API è¯·æ±‚</h4><p>åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œé¡µé¢è¯·æ±‚ä¸€ä¸ªè¯¦æƒ…æ¥å£ï¼Œå¹¶å°† UI æ¸²æŸ“å‡ºæ¥ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> GithubProfile <span class="keyword">extends</span> React.PureComponent&lt;IProps, IStates&gt; &#123;</span><br><span class="line">  state: IStates = &#123;</span><br><span class="line">    profile: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    fetch(<span class="string">'https://api.github.com/users/gaearon'</span>)</span><br><span class="line">      .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> response.json()</span><br><span class="line">      &#125;)</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">          profile: res</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; profile &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"profile"</span>&gt;</span><br><span class="line">        &lt;img src=&#123;profile.avatar_url&#125; alt=<span class="string">"avatar"</span> width=<span class="string">"200px"</span> /&gt;</span><br><span class="line">        &lt;div&gt;name: &#123;profile.name&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div&gt;company: &#123;profile.company&#125;&lt;/</span>div&gt;</span><br><span class="line">        &lt;div&gt;bio: &#123;profile.bio&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™æ ·çš„ç»“æœï¼š<br><img src="https://user-images.githubusercontent.com/20694238/80940985-d2c6fb00-8e13-11ea-9d49-7a164724844b.png" alt="github-profile"><br>æˆ‘ä»¬è¿›ä¸€æ­¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœå…¶å®ƒé¡µé¢ä¹Ÿæœ‰ç›¸åŒçš„éœ€æ±‚ï¼Œæˆ–è€…æ•°æ®ä¸€æ ·ï¼Œä»…ä»… UI ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿå…¶å®è¿™ä¸ªé—®é¢˜ç›®çš„å¾ˆç®€å•ï¼Œé‚£å°±æ˜¯ï¼š<strong>å¦‚ä½•å®ç°ä»£ç å¤ç”¨</strong>ã€‚<br>åœ¨ Hooks ä¹‹å‰ï¼Œæˆ‘ä»¬å¯¹äºä»£ç å¤ç”¨çš„è§£å†³åŠæ³•ä¸€èˆ¬æœ‰ä¸¤ç§ï¼Œ<a href="https://zh-hans.reactjs.org/docs/higher-order-components.html" target="_blank" rel="noopener">é«˜é˜¶ç»„ä»¶(HOC)</a> å’Œ <a href="https://zh-hans.reactjs.org/docs/render-props.html" target="_blank" rel="noopener">Render Props</a>ã€‚æˆ‘ä»¬å…ˆç”¨å·²æœ‰æŠ€æœ¯æ¥è§£å†³ï¼Œé¦–å…ˆç”¨ HOC å®ç°ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// withGithubProfile</span></span><br><span class="line"><span class="keyword">const</span> withGithubProfile = <span class="function">(<span class="params">WrappedComponent:<span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">class</span> <span class="keyword">extends</span> React.Component&lt;IProps, IStates&gt; &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">props:IProps</span>) &#123;</span><br><span class="line">      <span class="keyword">super</span>(props)</span><br><span class="line">      <span class="keyword">this</span>.state = &#123;</span><br><span class="line">        profile: &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">      fetch(<span class="string">'https://api.github.com/users/gaearon'</span>)</span><br><span class="line">        .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> response.json()</span><br><span class="line">        &#125;)</span><br><span class="line">        .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            profile: res</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; profile &#125; = <span class="keyword">this</span>.state</span><br><span class="line">      <span class="keyword">return</span> &lt;WrappedComponent profile=&#123;profile&#125; &#123;...this.props&#125; /&gt;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å¼•å…¥é«˜é˜¶ç»„ä»¶ï¼Œä½¿ç”¨å…¶ <code>profile</code> Propsï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> GithubProfileHoc <span class="keyword">extends</span> React.Component&lt;IProps, IStates&gt; &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; profile &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"profile"</span>&gt;</span><br><span class="line">        &lt;img src=&#123;profile.avatar_url&#125; alt=<span class="string">"avatar"</span> width=<span class="string">"200px"</span> /&gt;</span><br><span class="line">        &lt;div&gt;name: &#123;profile.name&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div&gt;followers: &#123;profile.followers&#125;&lt;/</span>div&gt;</span><br><span class="line">        &lt;div&gt;following: &#123;profile.following&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> WithGithubProfile(GithubProfileHoc)</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åä½¿ç”¨ Render Props å®ç°ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Render Props</span></span><br><span class="line"><span class="keyword">class</span> Profile <span class="keyword">extends</span> React.Component&lt;IProps, IStates&gt; &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">props:IProps</span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      profile: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    fetch(<span class="string">'https://api.github.com/users/gaearon'</span>)</span><br><span class="line">      .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> response.json()</span><br><span class="line">      &#125;)</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">          profile: res</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; profile &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> &lt;React.Fragment&gt;&#123;<span class="keyword">this</span>.props.children(profile)&#125;&lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>å®šä¹‰ props æ¸²æŸ“å‡½æ•°ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> ProfileRenderProps <span class="keyword">extends</span> React.PureComponent &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Profile&gt;</span><br><span class="line">        &#123;<span class="function">(<span class="params">profile:<span class="built_in">any</span></span>) =&gt;</span> (</span><br><span class="line">          &lt;div className=<span class="string">"profile"</span>&gt;</span><br><span class="line">            &lt;img src=&#123;profile.avatar_url&#125; alt=<span class="string">"avatar"</span> width=<span class="string">"200px"</span> /&gt;</span><br><span class="line">            &lt;div&gt;name: &#123;profile.name&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;div&gt;company: &#123;profile.company&#125;&lt;/</span>div&gt;</span><br><span class="line">            &lt;div&gt;bio: &#123;profile.bio&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>div&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">      &lt;<span class="regexp">/Profile&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šä¸¤ç§æ–¹å¼çš„ç¡®å¯ä»¥å®ç°ä»£ç å¤ç”¨ï¼Œä½†è¿™ä¸¤ç§æ–¹å¼ä¹Ÿå­˜åœ¨ä¸€å®šçš„ç¼ºç‚¹ï¼š<br>HOCï¼š</p>
<ul>
<li>ä½¿ç”¨å¤šä¸ªé«˜é˜¶ç»„ä»¶æ—¶ï¼Œæ— æ³•ç¡®å®š props æ¥æº</li>
<li>ç›¸åŒçš„ props ä¼šå­˜åœ¨è¦†ç›–çš„æƒ…å†µ</li>
<li>å¢åŠ è°ƒè¯•éš¾åº¦</li>
</ul>
<p>Render Props</p>
<ul>
<li>åœ°ç‹±å›è°ƒ</li>
</ul>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸¤ç§æ–¹å¼éƒ½åº”å¼•å…¥äº†å¤æ‚çš„ç¼–ç¨‹æ¨¡å¼ï¼Œåœ¨ä»£ç ç»´æŠ¤ä»¥åŠç†è§£æ–¹é¢ä¸æ˜¯å¾ˆå‹å¥½ã€‚</p>
<h4 id="input-è¾“å…¥"><a href="#input-è¾“å…¥" class="headerlink" title="input è¾“å…¥"></a>input è¾“å…¥</h4><p>ç´§æ¥ç€æˆ‘ä»¬çœ‹å¦å¤–ä¸€ä¸ªåœºæ™¯ï¼Œæœ‰ä¸€ä¸ª input æ¡†ï¼Œ<code>onChange</code> æ—¶è·å–è¾“å…¥æ¡†çš„å€¼ï¼Œä½¿ç”¨ <code>Class</code> å®ç°å¦‚ä¸‹ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Input <span class="keyword">extends</span> React.Component&lt;IProps, IStates&gt; &#123;</span><br><span class="line">  state: IStates = &#123;</span><br><span class="line">    name: <span class="string">''</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleOnchange = <span class="function">(<span class="params">e:<span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      name: e.target.value</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; name &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;input name: &#123;name&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;input value=&#123;name&#125; onChange=&#123;this.handleOnchange&#125; /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬åˆç»§ç»­æ‰©å±•ï¼Œå¦‚æœè¿˜æœ‰ä¸€ä¸ªç±»ä¼¼çš„ input æ¡†ï¼Œé‚£ä¹ˆæ€ä¹ˆå®ç°å‘¢ï¼Ÿä»£ç å¤åˆ¶è¿˜æ˜¯ä½¿ç”¨ Hooks å‘¢ ğŸ˜Š</p>
<h3 id="why-hooks"><a href="#why-hooks" class="headerlink" title="why hooks"></a>why hooks</h3><p>ä»¥ä¸Šä¸¤ç§åœºæ™¯æˆ–è€…ç±»ä¼¼åœºæ™¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ¯”è¾ƒæ¯”è¾ƒå¸¸è§ï¼Œæˆ‘ä»¬æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼æ¥å®ç°ä»£ç å¤ç”¨ã€‚æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°ä½¿ç”¨å‡½æ•°æ¥å®ç°ä»£ç å¤ç”¨ï¼Œä¾‹å¦‚åœ¨é¡¹ç›®ä¸­æˆ‘ä»¬ä¼šå°†ä¸€å…¬å…±çš„æ–¹æ³•æŠ½ç¦»å‡ºæ¥ï¼Œä¾‹å¦‚å°è£… api è¯·æ±‚çš„ <code>request.js</code>ã€‚æœ‰åŒå­¦å¯èƒ½å°±ä¼šæœ‰ç–‘é—®ï¼ŒReact ä¸æ˜¯æä¾›äº† function ç»„ä»¶ï¼ŸReact çš„ç¡®æä¾›äº† function ç»„ä»¶ï¼Œä½†åœ¨ React 16.8 ä¹‹å‰ function æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>function ç»„ä»¶ä¸å¾—ä¸è¿”å›ä¸€äº› UI ä¿¡æ¯ï¼Œå³ JSX ä»£ç </li>
<li>function ç»„ä»¶å†…éƒ¨ä¸èƒ½æ‹¥æœ‰ state</li>
</ul>
<p>æ­£æ˜¯ç”±äºè¿™äº›é—®é¢˜ï¼ŒReact å›¢é˜Ÿæå‡ºäº† Hooks æ€æƒ³ï¼Œå¹¶åœ¨ React 16.8 ä¸­æ–°å¢äº† React Hooks ç‰¹æ€§ã€‚è¯´äº†è¿™ä¹ˆä¹…ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ˜¯ React Hooksï¼Ÿç®€å•æ€»ç»“ä¸€ä¸‹æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<ul>
<li>Hooks è®©å‡½æ•°å¼ç»„ä»¶æ‹¥æœ‰ç±»ç»„ä»¶ä¸€æ ·çš„åŠŸèƒ½ï¼Œstate ï¼Œlifecycle ä»¥åŠ contextã€‚</li>
<li>Hooks ä¸æ˜¯ React çš„æ–°åŠŸèƒ½ï¼Œå¯ä»¥å°†å®ƒç†è§£ä¸ºä¸€ä¸ªâ€œé’©å­â€ï¼Œå¯ä»¥è®©ä½ åœ¨ä¸å†™ç±»ç»„ä»¶çš„æƒ…å†µä¸‹â€œå‹¾ä½â€React çš„æ‰€æœ‰åŠŸèƒ½ã€‚</li>
</ul>
<h3 id="ä½¿ç”¨-React-Hooks-å®ç°"><a href="#ä½¿ç”¨-React-Hooks-å®ç°" class="headerlink" title="ä½¿ç”¨ React Hooks å®ç°"></a>ä½¿ç”¨ React Hooks å®ç°</h3><blockquote>
<p>è¿™ç¯‡æ–‡ç« ä¸ä¼šè®²è§£ hooks å…·ä½“å†…å®¹ï¼Œè¯¦ç»†å†…å®¹å¯åœ¨<a href="https://kuangpf.com/blog/2020/04/25/react-hooks/" target="_blank" rel="noopener">React Hooks è®²è§£</a>ä¸­æŸ¥çœ‹ã€‚</p>
</blockquote>
<h4 id="usePropfile"><a href="#usePropfile" class="headerlink" title="usePropfile"></a>usePropfile</h4><p>ä½¿ç”¨ Hooks å®ç° API è¯·æ±‚ï¼š<a href="https://kuangpf.com/react-hooks-demo/#/custom-hooks/useProfile" target="_blank" rel="noopener">useProfile</a><br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// usePropfile</span></span><br><span class="line"><span class="keyword">const</span> usePropfile = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [profile, setProfile] = useState(&#123;&#125; <span class="keyword">as</span> TProfile)</span><br><span class="line">  <span class="keyword">const</span> [loading, setLoading] = useState(<span class="literal">false</span>)</span><br><span class="line">  <span class="keyword">const</span> [isError, setIsError] = useState(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setLoading(<span class="literal">true</span>)</span><br><span class="line">    fetch(<span class="string">'https://api.github.com/users/gaearon'</span>)</span><br><span class="line">      .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> response.json()</span><br><span class="line">      &#125;)</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        setProfile(res <span class="keyword">as</span> TProfile)</span><br><span class="line">        setIsError(<span class="literal">false</span>)</span><br><span class="line">        setLoading(<span class="literal">false</span>)</span><br><span class="line">      &#125;).catch(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">        setIsError(<span class="literal">true</span>)</span><br><span class="line">        setLoading(<span class="literal">false</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; profile, loading,isError &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨ <code>usePropfile</code> Hooksï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> UseProfilePage = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; profile, loading, isError &#125; = useProfile()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;React.Fragment&gt;</span><br><span class="line">      &#123;isError ? (</span><br><span class="line">        &lt;div&gt;Network <span class="built_in">Error</span>...&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      ) : (</span></span><br><span class="line"><span class="regexp">        &lt;div className="profile"&gt;</span></span><br><span class="line"><span class="regexp">          &#123;loading ? (</span></span><br><span class="line"><span class="regexp">            &lt;div&gt;loading profile...&lt;/</span>div&gt;</span><br><span class="line">          ) : (</span><br><span class="line">            &lt;React.Fragment&gt;</span><br><span class="line">              &lt;img src=&#123;profile.avatar_url&#125; alt=<span class="string">"avatar"</span> width=<span class="string">"200px"</span> /&gt;</span><br><span class="line">              &lt;div&gt;name: &#123;profile.name&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">              &lt;div&gt;company: &#123;profile.company&#125;&lt;/</span>div&gt;</span><br><span class="line">              &lt;div&gt;bio: &#123;profile.bio&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>React.Fragment&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      )&#125;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>React.Fragment&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>usePropfile</code> hooks è¿”å›äº†è¯·æ±‚ç»“æœ <code>profile</code>ï¼Œè¯·æ±‚çŠ¶æ€ <code>loading</code>ï¼Œä»¥åŠç½‘ç»œçŠ¶æ€ <code>isError</code>ã€‚ç„¶åä»¥å‡½æ•°è°ƒç”¨çš„æ–¹å¼ä½¿ç”¨ Hooksï¼Œè¿™æ ·ä»£ç ç»“æ„çœ‹èµ·æ¥å¾ˆæ¸…æ™°ï¼ŒåæœŸç»´æŠ¤ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚</p>
<h4 id="useInput"><a href="#useInput" class="headerlink" title="useInput"></a>useInput</h4><p>ç»§ç»­ä½¿ç”¨ Hooks å®ç° input è¾“å…¥é€»è¾‘ï¼š<a href="https://kuangpf.com/react-hooks-demo/#/custom-hooks/useInput" target="_blank" rel="noopener">useInput</a><br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useInput = <span class="function">(<span class="params">initialValue:<span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = useState(initialValue)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleChange = <span class="function">(<span class="params">e:<span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">    setValue(e.target.value)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    value,</span><br><span class="line">    onChange: handleChange</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å¼•å…¥ <code>useInput</code>ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useInputDemo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> value = useInput(<span class="string">'KuangPF'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"use-input"</span>&gt;</span><br><span class="line">      &lt;p&gt;current name: &#123;value.value&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;input &#123;...value&#125; /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡ä»¥ä¸Šä¸¤ä¸ª Hookså¯ä»¥çœ‹å‡ºï¼ŒReact Hooks åŠŸèƒ½çš„ç¡®å¼ºå¤§ï¼Œåœ¨é€»è¾‘å¤ç”¨æ–¹é¢æ¯” HOC ä»¥åŠ Render Props æ›´å…·ä¼˜åŠ¿ï¼Œåœ¨ä»£ç ç»´æŠ¤ä¸Šä¹Ÿæ›´åŠ æ¸…æ™°ã€‚</p>

</article>
<a href="https://github.com/KuangPF/blog/issues/17" class="issues-link" target="_blank">
  é—®é¢˜è®¨è®ºåŒº
</a>

<div class="pagenator post-pagenator">
  

  <p>ä¸Šæ¬¡æ›´æ–° 2020-05-04</p>

  
  <a class="extend next post-next" href="/blog/2020/04/25/react-hooks/">ä¸‹ä¸€ç¯‡</a>
  
</div>


    </div>
    <script src="https://unpkg.com/medium-zoom@1.0.4/dist/medium-zoom.min.js"></script>
    <script>
        let mediumZoomList = [...document.getElementsByTagName('img')].reduce((zoomList,currentItem)=> {
            return (currentItem.getAttribute('class') || []).indexOf('no-medium-zoom-image') >-1 ? zoomList : [...zoomList, currentItem]
        },[])
        mediumZoom(mediumZoomList)
    </script>
</body>
</html>
