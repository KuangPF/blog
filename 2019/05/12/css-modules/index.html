<!DOCTYPE html>

<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <link rel="shortcut icon" href="/blog/logo.png">
  <title>å¦‚ä½•åœ¨ create-react-app ä¸­ä½¿ç”¨ CSS Modules [ ğŸ¦„ KuangPFâ€™ blog ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/blog/css/iLiKE.css">
    
  
</head></html>
<body>
    <div class="header">
        <div class="container">
    <div class="menu">
      <div class="menu-left">
        <a href="/">
          <img src="/blog/unicorn.svg" class="no-medium-zoom-image"></img>
        </a>
      </div>
      <div class="menu-right">
        
          
          
          
          
          
          
          <a href="/blog">é¦–é¡µ</a>
        
          
          
          
          
          
          <a href="https://github.com/KuangPF">Github</a>
        
      </div>
    </div>
</div>
    </div>
    <div class="container">
        
<h1 class="post-title">å¦‚ä½•åœ¨ create-react-app ä¸­ä½¿ç”¨ CSS Modules</h1>
<article class="post markdown-style">
  
  
  <p align="center" style="text-align: center"><br>  <img width="150px" style="width:150px" src="https://raw.githubusercontent.com/css-modules/logos/master/css-modules-logo.png" alt="react-knowledge react"><br></p>

<p>åœ¨å¼€å§‹è®²è§£ä»¥å‰ï¼Œå…ˆç®€å•äº†è§£ä¸‹ä»€ä¹ˆæ˜¯ <a href="https://github.com/css-modules/css-modules" target="_blank" rel="noopener">CSS Modules</a></p>
<blockquote>
<p>A <strong>CSS Module</strong> is a CSS file in which all class names and animation names are scoped locally by default</p>
</blockquote>
<p>ç®€å•ç‚¹è¯´ CSS Module æ˜¯å…·æœ‰å±€éƒ¨ä½œç”¨åŸŸçš„ css æ–‡ä»¶ã€‚æ—¢ç„¶æåˆ°äº†å±€éƒ¨ä½œç”¨åŸŸï¼Œé‚£ä¹ˆè‚¯å®šæœ‰å…¨å±€ä½œç”¨åŸŸï¼Œåœ¨ create-react-app ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥ css æ–‡ä»¶é€šå¸¸ä¸ºä»¥ä¸‹å½¢å¼ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.css */</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.tsx */</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> Index <span class="keyword">extends</span> Component &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§å¼•å…¥æ–¹æ³•å°±ä¼šå‡ºç°å…¨å±€æ±¡æŸ“çš„é—®é¢˜ï¼ŒCSS ä½¿ç”¨å…¨å±€é€‰æ‹©å™¨æœºåˆ¶æ¥è®¾ç½®æ ·å¼ï¼Œä¼˜ç‚¹æ˜¯æ–¹ä¾¿é‡å†™æ ·å¼ï¼Œç¼ºç‚¹æ˜¯æ‰€æœ‰çš„æ ·å¼éƒ½æ˜¯å…¨å±€ç”Ÿæ•ˆï¼Œæ ·å¼å¯èƒ½è¢«é”™è¯¯è¦†ç›–ã€‚å‡å®šä¸€ä¸ªé¡µé¢æœ‰ä»¥ä¸‹ä¸¤ä¸ªç»„ä»¶ï¼š</p>
<ul>
<li><code>&lt;Header /&gt;</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./header.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> Index <span class="keyword">extends</span> Component &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> &lt;div className=<span class="string">"color"</span>&gt;Header color&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>header.css<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>&lt;Content /&gt;</code>, å†…å®¹å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./content.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> Index <span class="keyword">extends</span> Component &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> &lt;div className=<span class="string">"color"</span>&gt;Content color&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>header.css<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬æœŸå¾…åœ¨é¡µé¢ä¸Š Header color çš„å­—çš„é¢œè‰²ä¸º redï¼ŒContent color ä¸º greenï¼Œä½†å®é™…ä¸Šæ˜¯ä¸¤ä¸ªéƒ½ä¸º greenï¼Œè¿™å°±æ˜¯å› ä¸ºæˆ‘ä»¬ç›´æ¥å¼•å…¥ header.css å’Œ content.css åï¼Œæ ·å¼æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œè€Œç›¸åŒçš„æ ·å¼åˆå¯èƒ½å‡ºç°é”™è¯¯åœ°è¦†ç›–ï¼Œå› æ­¤å°±å‡ºç°äº†ä¸Šé¢çš„æƒ…å†µã€‚</p>
<p>é¿å…è¿™ç§æƒ…å†µåœ¨ create-react-app çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ CSS Modulesï¼Œä½¿ç”¨<a href="https://facebook.github.io/create-react-app/docs/adding-a-css-modules-stylesheet" target="_blank" rel="noopener">æ–¹æ³•</a>å°±æ˜¯å°†å¯¹åº”çš„ css æ–‡ä»¶åç§°å‘½åä¸º <code>[name].module.css</code> çš„å½¢å¼ï¼ˆä½¿ç”¨ less æˆ–è€… sass ç±»ä¼¼ï¼‰ï¼Œä»¥ <code>Header</code> ç»„ä»¶ä¸ºä¾‹ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* header.module.css */</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> headerStyle <span class="keyword">from</span> <span class="string">'./header.module.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> Index <span class="keyword">extends</span> Component &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> &lt;div className=&#123;headerStyle.color&#125;&gt;Header color&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ · Header color çš„é¢œè‰²å°±ä¼šä¸º redã€‚</p>
<p>å®ƒçš„å®ç°è¿‡ç¨‹å°±æ˜¯åˆ©ç”¨ Webpack çš„ <code>css-loader</code> ç”Ÿæˆï¼ˆåŸºæœ¬ï¼‰å”¯ä¸€çš„ class åç§°ï¼Œåœ¨ create-react-app ä¸­ä¼šä»¥ [filename]_[classname]__[hash] çš„å‘½åè§„åˆ™æ¥ç”Ÿæˆ class åç§°ï¼Œä¾‹å¦‚ <code>Header</code> ç»„ä»¶ç”Ÿæˆåçš„ html å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header_color__2Oqjl"</span>&gt;</span>Header color<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨äº† CSS Modules åï¼Œå°±ç›¸å½“äºç»™æ¯ä¸ª class åå¤–åŠ åŠ äº†ä¸€ä¸ª <code>:local</code>ï¼Œä»¥æ­¤æ¥å®ç°æ ·å¼çš„å±€éƒ¨åŒ–ï¼Œå¦‚æœä½ æƒ³åˆ‡æ¢åˆ°å…¨å±€æ¨¡å¼ï¼Œä½¿ç”¨å¯¹åº”çš„ <code>:global</code>ã€‚<code>:local</code> ä¸ <code>:global</code> çš„åŒºåˆ«æ˜¯ CSS Modules åªä¼šå¯¹ <code>:local</code> å—çš„ class æ ·å¼åšè§„åˆ™å¤„ç†ï¼Œ<code>:global</code> çš„æ ·å¼ç¼–è¯‘åä¸å˜ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä»¥ä¸Šä¸ä¸‹é¢ç­‰ä»· */</span></span><br><span class="line"><span class="selector-pseudo">:local(.color)</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å®šä¹‰å…¨å±€æ ·å¼ */</span></span><br><span class="line"><span class="selector-pseudo">:global(.global-bg)</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å¼€å‘ä¸­ä¼šé‡åˆ°æ ·å¼çš„å¤ç”¨é—®é¢˜ï¼ŒCSS Modules åªæä¾›äº†å”¯ä¸€çš„æ–¹å¼æ¥å¤„ç†ï¼š<code>composes</code> ç»„åˆ:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* åŸºç¡€æ ·å¼ */</span></span><br><span class="line"><span class="selector-class">.base</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#82D7F7</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">composes</span>: base;</span><br><span class="line">  <span class="comment">/* active å…¶ä»–æ ·å¼ */</span></span><br><span class="line">  <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨ active ä¸­ composes baseï¼Œç¼–è¯‘åä¼š active ä¼šå˜æˆä¸¤ä¸ª class<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"composes-demo_active__27azZ composes-demo_base__MLJCB"</span>&gt;</span>active<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>composes è¿˜å¯ä»¥ç»„åˆå¤–éƒ¨æ–‡ä»¶ä¸­çš„æ ·å¼:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">composes</span>: base;</span><br><span class="line">  <span class="attribute">composes</span>: bold from <span class="string">'./content.module.css'</span>;</span><br><span class="line">  <span class="comment">/* active å…¶ä»–æ ·å¼ */</span></span><br><span class="line">  <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘åä¼šå˜æˆä¸‰ä¸ª class<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"composes-demo_active__27azZ composes-demo_base__MLJCB content_bold__vgYTg"</span>&gt;</span>active<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>åœ¨ create-react-app ä¸­ä½¿ç”¨ CSS Modules ä¼šé¢‘ç¹çš„è¾“å…¥ <code>styles.**</code>ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://github.com/gajus/react-css-modules" target="_blank" rel="noopener">react-css-modules</a>æ¥é¿å…è¿™ç‚¹ï¼Œå®ƒé€šè¿‡é«˜é˜¶å‡½æ•°çš„å½¢å¼æ¥é¿å…é‡å¤è¾“å…¥ <code>styles.**</code>ã€‚</p>
<p>æ€»çš„æ¥è¯´åœ¨ create-react-app ä¸­ä½¿ç”¨ CSS Modules è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“ï¼Œå¦‚æœè¿˜æ²¡æœ‰åœ¨é¡¹ç›®ä¸­å°è¯•çš„è¯éå¸¸å€¼å¾—å»ä½¿ç”¨ CSS Modulesï¼Œæœ€åï¼Œæ„Ÿè°¢å„ä½å¤§ä½¬é˜…è¯»ã€‚</p>
<p><strong>å‚è€ƒæ–‡æ¡£</strong></p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/20495964" target="_blank" rel="noopener">CSS Modules è¯¦è§£åŠ React ä¸­å®è·µ</a></li>
<li><a href="https://blog.bitsrc.io/how-to-use-sass-and-css-modules-with-create-react-app-83fa8b805e5e" target="_blank" rel="noopener">How to use Sass and CSS Modules with create-react-app</a></li>
<li><a href="https://css-tricks.com/css-modules-part-1-need/" target="_blank" rel="noopener">What are CSS Modules and why do we need them?</a></li>
</ul>

</article>
<a href="https://github.com/KuangPF/blog/issues/11" class="issues-link" target="_blank">
  é—®é¢˜è®¨è®ºåŒº
</a>

<div class="pagenator post-pagenator">
  
  <a class="extend prev post-prev" href="/blog/2019/06/10/remove-array-duplicates/">ä¸Šä¸€ç¯‡</a>
  

  <p>ä¸Šæ¬¡æ›´æ–° 2019-10-11</p>

  
</div>


    </div>
    <script src="https://unpkg.com/medium-zoom@1.0.4/dist/medium-zoom.min.js"></script>
    <script>
        let mediumZoomList = [...document.getElementsByTagName('img')].reduce((zoomList,currentItem)=> {
            return (currentItem.getAttribute('class') || []).indexOf('no-medium-zoom-image') >-1 ? zoomList : [...zoomList, currentItem]
        },[])
        mediumZoom(mediumZoomList)
    </script>
</body>
</html>
